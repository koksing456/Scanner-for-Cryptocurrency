<html>
    <head>
        <style>
            body{
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
                margin: 20px;
            }
            .bullish{background-color: green; color: white;}
            .bearish{background-color: red; color: white;}
            td{padding: 10px;}
        </style>
    </head>
    <body>
        <h1>Crypto Scanner Based on Candlestick Pattern</h1>

        <form>
            <select name="pattern">
                {% for pattern in patterns %}
                <option value="{{ pattern }}" {% if pattern == current_pattern %} selected="selected" {% endif %}>{{patterns[pattern]}}</option>
                {% endfor %}
            </select>

            <input type="submit" value="Scan" />
        </form>

        <table>
            <tr>
                <th>Symbol</th>
                <th>Company Name</th>
                <th>Signal</th>
            </tr>

        {% for stock in stocks %}
            {% if stocks[stock][current_pattern] %}
            <tr>
                <td>{{stock}}</td>
                <td>{{stocks[stock]['company']}}</td>
                <td class="{{stocks[stock][current_pattern]}}">{{stocks[stock][current_pattern]}}</td>
            </tr>
            <tr>
                <td colspan="3">
                    <img src="http://finviz.com/chart.ashx?t={{stock}}&ty=c&ta=1&p=d&s=l" />
                </td>
            </tr>
            {% endif %}
        {% endfor %}
        </table>

        

    </body>
</html>